import{r as u,j as d,a as c,e as I,d as D,u as T,b as L,f as O}from"./index-56b56433.js";import{i as R}from"./icons-a17edc8c.js";import{g as H,a as q}from"./commonModalSeacrh-9e69ba78.js";const z=({iconAfter:v,iconbefore:n,text:t,defaultText:m})=>d("div",{className:"m-2 bg-white border border-danger rounded d-flex justify-content-between align-items-center p-2 w-[95%] text-[#777]",children:[d("div",{className:"search_items flex justify-center align-items-center md:flex-col",children:[c("span",{className:"md:hidden",children:v}),c("span",{className:`${t?"text-black font-medium":""} md:text-[13px]`,children:t||m})]}),n]}),j=u.memo(z),Q=({setIsShowModal:v,content:n,name:t,handleSubmitModal:m,queries:C,arrMinMax:s,defaultText:N,header:P})=>{const[r,y]=u.useState(t==="price"&&(s!=null&&s.priceArr)?s==null?void 0:s.priceArr[0]:t==="area"&&(s!=null&&s.areaArr)?s==null?void 0:s.areaArr[0]:0),[o,g]=u.useState(t==="price"&&(s!=null&&s.priceArr)?s==null?void 0:s.priceArr[1]:t==="area"&&(s!=null&&s.areaArr)?s==null?void 0:s.areaArr[1]:100),[S,$]=u.useState("");u.useEffect(()=>{const e=document.getElementById("track-active");e&&(o<=r?(e.style.left=`${o}%`,e.style.right=`${100-r}%`):(e.style.left=`${r}%`,e.style.right=`${100-o}%`))},[r,o]);const b=(e,i)=>{const x=document.getElementById("track").getBoundingClientRect();let a=i||Math.round((e.clientX-x.left)*100/x.width,0);Math.abs(a-r)<=Math.abs(a-o)?y(a):g(a)},f=e=>t==="price"?Math.ceil(Math.round(e*1.5)/5)*5/10:t==="area"?Math.ceil(Math.round(e*.9)/5)*5:0,k=e=>Math.floor(e/(t==="price"?15:t==="area"?90:1)*100),E=(e,i)=>{$(e);let l=t==="price"?H(i):q(i);l.length===1&&(l[0]===1&&(y(0),g(k(1))),l[0]===20&&(y(0),g(k(20))),(l[0]===15||l[0]===90)&&(y(100),g(100))),l.length===2&&(y(k(l[0])),g(k(l[1])))},B=e=>{let i=r<=o?r:o,l=r<=o?o:r,x=r===o&&r===100?[f(i),99999]:[f(i),f(l)];m(e,{[`${t}Number`]:x,[t]:`Từ ${f(i)}${r===o&&r===100?"":`-${f(l)}`} ${t==="price"?"Triệu":"m2"}${r===o&&r===100?"Trở lên":""}`},{[`${t}Arr`]:[i,l]})};return console.log(n),c("div",{onClick:e=>{v(!1)},className:"fixed z-10 bg-overlay-30 top-0 left-0 right-0 bottom-0 flex justify-center items-center ",children:d("div",{onClick:e=>{e.stopPropagation(),v(!0)},className:"w-2/3 bg-white rounded-md overflow-y-auto",children:[d("div",{className:"h-[45px] w-full px-4 flex justify-center items-center border-b border-gray-200",children:[c("span",{className:"cursor-pointer",onClick:e=>{e.stopPropagation(),v(!1)}}),c("div",{className:"font-bold",children:P}),c("hr",{})]}),t==="category"&&d("div",{className:`flex flex-col ps-2 ${t==="province"&&"h-[500px] overflow-y-scroll"} `,children:[d("span",{className:"p-2 cursor-pointer",style:{borderBottom:"1px solid #ccc"},children:[c("input",{type:"radio",name:t,id:"default",value:N||"",checked:!C[`${t}Code`],onChange:e=>m(e,{[t]:N,[`${t}Code`]:null})}),c("label",{htmlFor:"default",className:"ms-1",children:N})]}),n==null?void 0:n.map(e=>d("span",{className:"p-2 cursor-pointer ",style:{borderBottom:"1px solid #ccc"},children:[c("input",{type:"radio",name:t,id:e.code,value:e.code,checked:e.code===C[`${t}Code`],onChange:i=>m(i,{[t]:e.value,[`${t}Code`]:e.code})}),c("label",{htmlFor:e.code,className:"ms-1",children:e.value})]}))]}),t==="province"&&d("div",{className:`flex flex-col ps-2 ${t==="province"&&"h-[500px] overflow-y-scroll"} `,children:[d("span",{className:"p-2 cursor-pointer",style:{borderBottom:"1px solid #ccc"},children:[c("input",{type:"radio",name:t,id:"default",value:N||"",checked:!C[`${t}Code`],onChange:e=>m(e,{[t]:N,[`${t}Code`]:null})}),c("label",{htmlFor:"default",className:"ms-1",children:N})]}),n==null?void 0:n.map(e=>d("span",{className:"p-2 cursor-pointer ",style:{borderBottom:"1px solid #ccc"},children:[c("input",{type:"radio",name:t,id:e.code,value:e.value,checked:e.code===C[`${t}Code`],onChange:i=>m(i,{[t]:e.value,[`${t}Code`]:e.code})}),c("label",{htmlFor:e.code,className:"ms-1",children:e.value})]},e.code))]}),(t==="price"||t==="area")&&d("div",{className:" flex flex-col overflow-x-hidden",children:[d("div",{className:"p-12 py-20 ",children:[c("div",{children:c("h2",{className:"text-center mb-5",children:r===100&&o===100?`Trên ${f(r)} ${t==="price"?"Triệu":"m2"}+`:`Từ ${r<=o?f(r):f(o)} - ${o>=r?f(o):f(r)} ${t==="price"?"Triệu":"m2"} `})}),d("div",{className:"flex flex-col items-center justify-center relative",children:[c("div",{onClick:b,id:"track",className:"bg-gray-400 w-full p-1 h-[5px] absolute top-0 bottom-0 rounded-md cursor-pointer"}),c("div",{onClick:b,id:"track-active",className:"bg-orange-600 p-1 h-[5px] absolute top-0 bottom-0 right-0 rounded-md cursor-pointer"}),c("input",{type:"range",step:.01,min:0,max:100,value:r,className:"w-full absolute appearance-none pointer-events-none bottom-0 top-0 cursor-pointer  ",onChange:e=>{y(+e.target.value),S&&$("")}}),c("input",{min:0,max:100,step:.01,type:"range",value:o,className:"w-full absolute appearance-none pointer-events-none bottom-0 top-0 cursor-pointer  ",onChange:e=>{g(+e.target.value),S&&$("")}}),d("div",{className:"absolute top-6 right-0 left-0 bottom-0 flex justify-between items-center",children:[c("span",{className:"cursor-pointer",onClick:e=>{e.stopPropagation(),b(e,0)},children:"0"}),c("span",{className:"cursor-pointer",onClick:e=>{e.stopPropagation(),b(e,100)},children:t==="price"?" 15 triệu +":t==="area"?"Trên 90m2":""})]})]})]}),c("h5",{className:"ms-4",children:"Chọn Nhanh"}),c("div",{className:"flex items-center flex-wrap w-full gap-3 mt-4 p-2 md:justify-center ",children:n==null?void 0:n.map(e=>c("button",{onClick:()=>E(e.code,e.value),className:`text-black bg-gray-300 p-3 rounded-md cursor-pointer ${e.code===S?"bg-blue-400":""} `,children:e.value},e.code))}),(t==="price"||t==="area")&&c("button",{onClick:B,type:"button",className:"w-full bg-orange-400 mt-4 p-2 font-semibold",children:"Áp dụng"})]})]})})},V=u.memo(Q),{ImLocation:W,GrFormNext:G,MdOutlineMapsHomeWork:X,GrMoney:_,RiCrop2Line:J,RiDeleteBack2Line:K,GrSearch:U}=R,ee=()=>{const[v,n]=u.useState(!1),[t,m]=u.useState([]),[C,s]=u.useState(""),[N,P]=u.useState(""),[r,y]=u.useState(""),[o,g]=u.useState({}),[S,$]=u.useState({}),b=I();u.useEffect(()=>{b!=null&&b.pathname.includes(D.seacrh)||($({}),g({}))},[b]);const f=T(a=>a.category.categoryData.response),k=T(a=>a.price.dataPrice),E=T(a=>a.acrea.data),B=T(a=>a.post.province.data),e=L(),i=u.useCallback((a,w,A)=>{a.stopPropagation(),g(p=>({...p,...w})),n(!1),A&&$(p=>({...p,...A}))},[o,v]),l=(a,w,A,p)=>{y(A),m(a),P(w),n(!0),s(p)},x=()=>{let a=Object.entries(o).filter(h=>h[0].includes("Number")||h[0].includes("Code")).filter(h=>h[1]),w={};a.forEach(h=>{w[h[0]]=h[1]});let A=Object.entries(o).filter(h=>!h[0].includes("Code")||!h[0].includes("Number")),p={};A.forEach(h=>{p[h[0]]=h[1]});let F=`${p.category?p.category:"Cho thuê"} 
        ${p.province?p.province:""} 
        Giá ${p.price?p.price:""}, 
        Diện tích ${p.area?p.area:""} `;e({pathname:D.seacrh,search:O(w).toString()},{state:{titleTextSearch:F}})};return d("div",{className:"xs:px-3 md:px-5",children:[d("div",{className:"container search xs:flex my-3 bg-[#febb02] rounded-lg  flex items-center justify-evenly cursor-pointer",children:[c("span",{className:"w-full xs:hidden",onClick:()=>l(f,"category","Tìm tất cả","Tìm tất cả"),children:c(j,{text:o.category,iconAfter:c(X,{}),iconbefore:c(K,{}),defaultText:"Tìm tất cả"})}),c("span",{className:"w-full",onClick:()=>l(B,"province","Toàn quốc","Chọn tỉnh thành"),children:c(j,{text:o.province,iconAfter:c(W,{}),iconbefore:c(G,{}),defaultText:"Toàn quốc"})}),c("span",{className:"w-full xs:hidden",onClick:()=>l(k,"price","Chọn Giá","Chọn Giá"),children:c(j,{text:o.price,iconbefore:c(G,{}),iconAfter:c(_,{}),defaultText:"Chọn Giá"})}),c("span",{className:"w-full xs:hidden",onClick:()=>l(E,"area","Chọn Diện Tích","Chọn Diện Tích"),children:c(j,{text:o.area,iconAfter:c(J,{}),iconbefore:c(G,{}),defaultText:"Diện tích"})}),c("button",{className:"w-fit lg:ms-2 p-2 bg-[lightskyblue] rounded-md flex justify-center items-center  ",onClick:x,children:c(U,{style:{marginBottom:"2px"}})})]}),v&&c(V,{content:t,name:N,queries:o,arrMinMax:S,setIsShowModal:n,handleSubmitModal:i,defaultText:r,header:C})]})};export{ee as S};
